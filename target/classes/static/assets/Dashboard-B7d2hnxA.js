import{j as a,r as d}from"./index-DQkY96rc.js";import{C as x}from"./index.esm-CmieAJ5w.js";import{C as u,a as D}from"./CCardBody-Dka9-WXd.js";import{C as p,a as s}from"./CRow-DMBw-idI.js";import{C as l}from"./CFormInput-2XdN1xrD.js";import{a as g}from"./index.esm-CsVMth3X.js";import"./CFormControlWrapper-C9xCSD9I.js";import"./CFormControlValidation-D6H3tTV0.js";import"./CFormLabel-D-i2Ydtg.js";const j=({chartData:c})=>a.jsx(x,{style:{height:"300px",marginTop:"40px"},data:c,options:{maintainAspectRatio:!1,scales:{x:{grid:{drawOnChartArea:!1}},y:{beginAtZero:!0,ticks:{callback:i=>`${i.toLocaleString()}đ`}}}}}),I=()=>{const[c,i]=d.useState([]),[t,n]=d.useState({startDay:1,endDay:31,month:new Date().getMonth()+1,year:new Date().getFullYear()});d.useEffect(()=>{h()},[]);const h=async()=>{try{const r=await(await fetch("http://localhost:8080/api/orders/getall")).json();i(r)}catch(e){console.error("Error fetching orders:",e)}},y=()=>{const e={};for(let r=t.startDay;r<=t.endDay;r++)e[r]=0;return c.forEach(r=>{const m=new Date(r.orderDate),o=m.getDate();m.getMonth()+1===t.month&&m.getFullYear()===t.year&&o>=t.startDay&&o<=t.endDay&&(e[o]=(e[o]||0)+r.totalPrice)}),{labels:Object.keys(e),datasets:[{label:"Daily Sales",data:Object.values(e)}]}};return a.jsx(a.Fragment,{children:a.jsx(u,{className:"mb-4",children:a.jsxs(D,{children:[a.jsxs(p,{children:[a.jsx(s,{sm:5,children:a.jsx("h4",{id:"traffic",className:"card-title mb-0",children:"Sales Statistics"})}),a.jsxs(s,{sm:7,className:"d-none d-md-block",children:[a.jsxs(p,{children:[a.jsx(s,{sm:3,children:a.jsx(l,{type:"number",label:"Start Day",value:t.startDay,onChange:e=>n({...t,startDay:parseInt(e.target.value)}),min:1,max:31})}),a.jsx(s,{sm:3,children:a.jsx(l,{type:"number",label:"End Day",value:t.endDay,onChange:e=>n({...t,endDay:parseInt(e.target.value)}),min:1,max:31})}),a.jsx(s,{sm:3,children:a.jsx(l,{type:"number",label:"Month",value:t.month,onChange:e=>n({...t,month:parseInt(e.target.value)}),min:1,max:12})}),a.jsx(s,{sm:3,children:a.jsx(l,{type:"number",label:"Year",value:t.year,onChange:e=>n({...t,year:parseInt(e.target.value)})})})]}),a.jsx(g,{color:"primary",onClick:h,className:"mt-3",children:"Thống kê"})]})]}),a.jsx(j,{chartData:y()})]})})})};export{I as default};
